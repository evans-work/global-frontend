<div class="form">

   <form [formGroup]="formGroup" (ngSubmit)="onSubmit(formGroup.value)">
      <h2 *ngIf="action == 'create'" class="title">User</h2>
      <mat-form-field class="input">
         <mat-label>First Name</mat-label>
         <input 
         matInput 
         type="text"
         formControlName="firstName"
         placeholder="Ex. John">
   
         <mat-error *ngIf="formGroup.controls.firstName.invalid && formGroup.controls.firstName.errors.required">
            First Name is required
         </mat-error>
      </mat-form-field>

      <mat-form-field class="input">
         <mat-label>Last Name</mat-label>
         <input 
         matInput 
         formControlName="lastName"
         placeholder="Ex. Doe">

         <mat-error *ngIf="formGroup.controls.lastName.invalid && formGroup.controls.lastName.errors.required">
            lastName is required
         </mat-error>
      </mat-form-field>

      <mat-form-field class="input">
         <mat-label>Email</mat-label>
         <input 
         matInput 
         type="email"
         formControlName="email">
         
         <mat-error *ngIf="formGroup.controls.email.invalid && formGroup.controls.email.errors.required">
            email is required
         </mat-error>
      </mat-form-field>

      <mat-form-field *ngIf="action == 'create'" class="input">
         <mat-label>Password</mat-label>
         <input 
         matInput 
         type="password"
         formControlName="password">
         
         <mat-error *ngIf="formGroup.controls.password.invalid && formGroup.controls.password.errors.required">
            password paid is required
         </mat-error>
         <mat-error *ngIf="formGroup.controls.password.invalid&&formGroup.controls.password.errors.minlength">
            Password should be atleast 8 characters long
         </mat-error>
      </mat-form-field>

      <mat-form-field *ngIf="action == 'create'" class="input">
         <mat-label>Confirm Password</mat-label>
         <input 
         matInput 
         type="password"
         formControlName="confirmPassword">
         
         <mat-error *ngIf="formGroup.controls.confirmPassword.invalid && formGroup.controls.confirmPassword.errors.required">
            Confirm Password is required
         </mat-error>
         
      </mat-form-field>

      <mat-form-field class="input">
         <mat-label>branch</mat-label>
         <input 
         matInput 
         type="text"
         formControlName="branch"
         placeholder="Ex. Kenya">
         
         <mat-hint >
            The company branch in which this  user is located
         </mat-hint> 

         <mat-error *ngIf="formGroup.controls.branch.invalid && formGroup.controls.branch.errors.required">
            branch
         </mat-error>
      </mat-form-field>

      <mat-form-field class="input">
         <mat-label>Telephone</mat-label>
         <input 
         matInput 
         type="text"
         formControlName="telephone"
         placeholder="Ex. Kenya"> 

      </mat-form-field>

      <mat-form-field class="input" *ngIf="!isLoadingResults">
         <mat-label>User Group</mat-label>
         <mat-select appearance="fill" formControlName="userGroup" >
            <mat-option *ngFor="let group of groups" [value] = "group._id"(click)="selectedGroup = group.name">
               {{group.name}}
            </mat-option>        
         </mat-select>
         <mat-error *ngIf="formGroup.controls.userGroup.invalid && formGroup.controls.userGroup.errors.required">
            User group is required
         </mat-error>
      </mat-form-field>

      <div class="btns">
         <button type="submit" mat-flat-button color="primary">{{action == 'edit'?'save':action}}</button>
         <button 
            type="button" 
            mat-flat-button color="warn" 
            (click)="onCancel()" 
            *ngIf="action == 'edit'">
            Cancel
         </button>      
      </div>
      
   </form>
   
</div>
